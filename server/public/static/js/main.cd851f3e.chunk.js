(this["webpackJsonpmern-chat"]=this["webpackJsonpmern-chat"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),o=(a(66),a(56)),s=a(3),m=a(57),u=a.n(m),i=a(13),p=a(17),E=(a(97),a(1)),f=a(7),d=a(9),b=a.n(d),g=a(118);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||localStorage.getItem("token"),a={headers:{"Content-type":"application/json"}};return t&&!O(t)&&(a.headers.Authorization="Bearer ".concat(t)),a}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||localStorage.getItem("token");if(!t||O(t))return null;var a=g(t);return{token:t,user:a}}function O(e){var t=g(e);return(new Date).getTime()/1e3>t.exp}var N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return console.log(e),{type:"GET_ERRORS",payload:{msg:e.response?e.response.data.msg:"",errors:e.response?e.response.data.errors:[],status:e.response?e.response.status:null,id:t}}},y=function(){return{type:"CLEAR_ERRORS"}},_=function(e){var t=e.msg,a=e.errors,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"GET_ERRORS",payload:{msg:t||"Error",errors:a||[],status:null,id:n}}},S=function(e){return function(t){t({type:"UPDATE_MESSAGES",payload:Object(f.a)({},e,{date:(new Date).toISOString()})})}};function R(e){var t=e.chats,a=e.setChat;return r.a.createElement("div",{style:{maxHeight:"82vh",overflowY:"auto"}},r.a.createElement("ul",{className:"list-group"},t.data.map((function(e){return r.a.createElement(C,{key:e._id,chat:e,setChat:a})}))))}function C(e){var t=e.chat,a=e.setChat,n=Object(E.c)((function(e){return e.auth.user.name})),c=t.name,l=t.message,o=t.type;return r.a.createElement("button",{className:"list-group-item list-group-item-action p-2",onClick:function(){return a(t)}},r.a.createElement("p",{className:"m-0"},r.a.createElement("b",null,"group"===o?c:c.split("__")[0]===n?c.split("__")[1]:c.split("__")[0])),r.a.createElement("p",{className:"m-0"},r.a.createElement("small",null,l&&"System"!==l.name&&"".concat(l.name,": "),l&&l.text)),r.a.createElement("small",null,l&&function(e){var t=new Date(e);return"".concat(t.getDate()," ").concat(["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t.getMonth()]," ").concat(t.getFullYear())}(l.date)),r.a.createElement("small",{className:"float-right"},l&&function(e){var t=new Date(e);return"".concat(t.getHours(),":").concat(t.getMinutes())}(l.date)))}var j=function(){return function(e){b.a.get("/api/users/contacts",h()).then((function(t){return e({type:"CONTACTS_LOADED",payload:t.data})})).catch((function(e){return N(e,"CONTACTS_ERROR")}))}},A=function(){var e=Object(E.b)();return r.a.createElement("button",{className:"btn",onClick:function(){return window.confirm("Logout?")&&e((function(e){e({type:"USER_LOADING"}),e({type:"CLEAR_CHATS"}),e({type:"LOGOUT_SUCCESS"})}))}},r.a.createElement("span",{className:"navbar-light"},r.a.createElement("img",{src:"/images/out.png",alt:"logout",style:{height:"4vh"}})))};function w(e){var t=e.collapse,a=e.setCollapse,n=e.showModal,c=e.className,l=void 0===c?"":c,o=Object(E.c)((function(e){return e.auth.user}));return r.a.createElement("div",{className:"user-info ".concat(l)},r.a.createElement("button",{className:"btn d-md-none",onClick:function(){return a(!t)}},r.a.createElement("span",{className:"navbar-light"},r.a.createElement("span",{className:"navbar-toggler-icon"}))),r.a.createElement("span",{className:"user-info-text"},o.name),r.a.createElement("span",{className:"float-right"},r.a.createElement(T,{showModal:n}),r.a.createElement(A,null)))}function T(e){var t=e.showModal,a={fontSize:"3vh"};return r.a.createElement(n.Fragment,null,r.a.createElement("span",{className:"navbar-light"},r.a.createElement("button",{className:"btn",onClick:function(){t("newgroup")}},r.a.createElement("span",{style:a},"+")),r.a.createElement("button",{className:"btn",onClick:function(){t("contacts")}},r.a.createElement("span",{style:a,role:"img","aria-label":"a"},"\ud83d\udcac"))))}function k(){return r.a.createElement("div",{className:"chat-search pt-1 pb-1"},r.a.createElement("form",{onClick:function(e){return e.preventDefault()}},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Cari...",style:{height:"38px",fontSize:"20px"}})))}function D(e){var t=e.chat,a=e.showModal,n=t.name,c=t.type,l=t.members,o=Object(E.c)((function(e){return e.auth.user.name})),s="group"===c?n:n.split("__")[0]===o?n.split("__")[1]:n.split("__")[0];return r.a.createElement("div",{className:"chat-info pl-2"},r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0"},r.a.createElement("b",null,s)),"group"===c&&r.a.createElement("small",null,l.length," Anggota | Online (",[].length,")")),r.a.createElement("div",{className:"chat-info-menu"},"group"===c&&r.a.createElement("button",{className:"btn",onClick:function(){return a("chat-settings",s)}},r.a.createElement("span",{className:"menu-icon"}))))}function L(e){var t=e.messages,a=Object(n.useRef)(null),c=Object(E.c)((function(e){return e.auth.user._id}));return Object(n.useEffect)((function(){a.current.scrollIntoView()}),[t]),r.a.createElement("div",{className:"chat-messages"},t.map((function(e,t){return r.a.createElement("div",{className:"chat-item ".concat(e.from?e.from===c&&"chat-item-right":"chat-item-center"),key:t},e.from&&e.from!==c&&e.name+": ",e.text)})),r.a.createElement("div",{ref:a}))}function U(e){var t=e.sendMessage,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1];return r.a.createElement("div",{className:"message-form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l&&t(l),o("")}},r.a.createElement("input",{type:"text",value:l,onChange:function(e){return o(e.target.value)},placeholder:"Ketikkan pesan..."}),r.a.createElement("button",null,r.a.createElement("span",{style:{fontSize:"200%"}},"\u27a4"))))}var I=function(e){var t=e.modal,a=e.setModal,n=e.children,c=n.props?n.props.title:"";return r.a.createElement("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:t?"block":"none",overflow:"auto"}},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},c),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return a(!1)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},n))))},x=function(e){var t=e.submitNewGroup,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1],m=Object(E.c)((function(e){return e.chats.isLoading})),u=Object(E.c)((function(e){return e.error}));return r.a.createElement("div",null,JSON.stringify(u),r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),l&&t(l),o("")}},r.a.createElement("input",{type:"text",className:"form-control mb-2",placeholder:"Nama Group",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{disabled:m,className:"btn btn-outline-primary btn-block"},"Submit")))},G=function(e){var t=e.setModal,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),i=u[0],p=u[1],f=Object(n.useState)([]),d=Object(s.a)(f,2),g=d[0],v=d[1],O=Object(E.c)((function(e){return e.error})),y=Object(E.c)((function(e){return e.contacts})),_=Object(E.b)(),S=function(e){e.preventDefault(),l&&_(function(e){return function(t){b.a.post("/api/users/contact",{username:e},h()).then((function(e){t({type:"CONTACTS_UPDATED",payload:e.data}),t({type:"CLEAR_ERRORS"})})).catch((function(e){return t(N(e,"ADD_CONTACT_ERR"))}))}}(l)),o("")};Object(n.useEffect)((function(){v(y.filter((function(e){return e.username.toLowerCase().indexOf(i.toLowerCase())>-1||e.name.toLowerCase().indexOf(i.toLowerCase())>-1})))}),[i,y]);var R=i?g:y;return r.a.createElement("div",null,O.msg&&r.a.createElement("div",{className:"alert alert-danger"},O.msg),r.a.createElement("form",{onSubmit:function(e){return S(e)}},r.a.createElement("input",{type:"text",className:"form-control mb-1",placeholder:"Username",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{className:"btn btn-outline-primary btn-block"},"Tambahkan")),r.a.createElement("hr",null),0===y.length?r.a.createElement("p",{className:"small text-muted"},"Belum ada kontak"):r.a.createElement("input",{type:"text",className:"form-control mb-1",placeholder:"cari nama / username",value:i,onChange:function(e){return p(e.target.value)}}),r.a.createElement("ul",{className:"list-group",style:{maxHeight:"50vh",overflow:"auto"}},R.map((function(e,a){return r.a.createElement("li",{key:e.username+a,className:"list-group-item p-1 pl-2"},r.a.createElement("div",{className:"float-left"},r.a.createElement("p",{className:"mb-0"},e.name),r.a.createElement("small",{className:"text-muted"},e.username)),r.a.createElement("button",{className:"btn float-right",onClick:function(){var a;_((a=e._id,function(e){e({type:"CHATS_LOADING"}),b.a.post("/api/chat",{type:"private",userId:a},h()).then((function(t){t.data.new&&e({type:"GROUP_CREATED",payload:t.data.chat}),e({type:"SET_ACTIVE_CHAT",payload:t.data.chat}),e({type:"CLEAR_ERRORS"})})).catch((function(t){return e(N(t,"PM_ERROR"))}))})),t(!1)}},r.a.createElement("span",{style:{fontSize:"20px"},role:"img","aria-label":"msg"},"\ud83d\udcac")))}))))},M=function(e){var t=e.showModal,a=Object(E.c)((function(e){return e.activeChat})),n=a.members,c=a.owner,l=Object(E.c)((function(e){return e.auth.user._id}));return r.a.createElement("div",null,r.a.createElement("p",{className:"mb-1"},r.a.createElement("b",null,"Anggota (",n.length,")",c===l&&r.a.createElement("button",{className:"ml-2 btn btn-sm btn-outline-dark p-0 pr-1 pl-1",onClick:function(){t("invite-member")}},r.a.createElement("span",null,"+")))),r.a.createElement("ul",{className:"list-group"},n.map((function(e){return r.a.createElement("li",{key:e.username,className:"list-group-item p-1 pl-2"},r.a.createElement("p",{className:"mb-0"},e.name),r.a.createElement("small",{className:"text-muted"},e.username))}))))},H=function(e){var t=e.submitInvite,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1],m=Object(E.c)((function(e){return e.error})),u=Object(E.c)((function(e){return e.contacts}));return r.a.createElement("div",null,m.msg&&r.a.createElement("div",{className:"alert alert-danger"},m.msg),r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),l&&t(l),o("")}(e)}},r.a.createElement("input",{type:"text",className:"form-control mb-1",placeholder:"Username",value:l,onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{className:"btn btn-outline-primary btn-block"},"Tambahkan")),r.a.createElement("hr",null),r.a.createElement("p",{className:"m-0"},"Dari daftar kontak"),0===u.length&&r.a.createElement("p",{className:"small text-muted"},"Belum ada kontak"),r.a.createElement("ul",{className:"list-group"},u.map((function(e){return r.a.createElement("li",{className:"list-group-item p-1 pl-2"},JSON.stringify(e),r.a.createElement("button",{className:"btn btn-sm btn-outline-primary"},"Tambahkan"))}))))};a(121);function P(e){var t=e.io,a=Object(n.useState)(!0),c=Object(s.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(!1),u=Object(s.a)(m,2),i=u[0],p=u[1],f=Object(n.useState)(null),d=Object(s.a)(f,2),g=d[0],v=d[1],O=Object(E.c)((function(e){return e.chats})),y=Object(E.c)((function(e){return e.activeChat})),_=Object(E.c)((function(e){return e.auth})).user,C=Object(E.b)();Object(n.useEffect)((function(){t&&t.off(),t.on("message",(function(e){C(S(e))})),t.on("added",(function(e){C(function(e){return function(t){t({type:"ADDED_TO_GROUP",payload:e})}}(e))})),t.on("new_member",(function(e,t){C(S({name:"System",text:"".concat(e.name," (").concat(e.username,") telah bergabung!"),room:y._id})),e._id!==t&&C(function(e){return function(t){t({type:"NEW_MEMBER",payload:e})}}(e))}))}),[C,t,y._id,_._id]),Object(n.useEffect)((function(){C((function(e){e({type:"CHATS_LOADING"}),b.a.get("/api/chat",h()).then((function(t){e({type:"CLEAR_ERRORS"}),e({type:"CHATS_LOADED",payload:t.data})})).catch((function(t){e(N(t,"CHATS_ERROR")),e({type:"CHATS_ERROR"})}))}))}),[C]);var j=function(e){v(e),p(!0)};return r.a.createElement("div",{className:"row p-0",id:"chat"},r.a.createElement(I,{modal:i,setModal:p},"newgroup"===g?r.a.createElement(x,{title:"Buat group",submitNewGroup:function(e){var t;C((t=e,function(e){e({type:"CHATS_LOADING"}),b.a.post("/api/chat",{name:t,type:"group"},h()).then((function(t){e({type:"GROUP_CREATED",payload:t.data}),e({type:"SET_ACTIVE_CHAT",payload:t.data})})).catch((function(e){return N(e,"CREATE_GROUP_ERROR")}))})),o(!0),p(!1)}}):"contacts"===g?r.a.createElement(G,{title:"Kontak",setModal:p}):"chat-settings"===g?r.a.createElement(M,{title:y.name,showModal:j}):"invite-member"===g?r.a.createElement(H,{title:y.name,submitInvite:function(e){return C(function(e,t){return function(a){b.a.post("/api/chat/invite",{username:e,groupId:t},h()).then((function(e){a({type:"NEW_MEMBER",payload:e.data}),a({type:"CLEAR_ERRORS"})})).catch((function(e){a(N(e,"INVITE_ERROR"))}))}}(e,y._id))}}):""),r.a.createElement("div",{className:"col-md-5 col-lg-4 p-0"},r.a.createElement(w,{collapse:l,setCollapse:o,showModal:j}),r.a.createElement("div",{className:"".concat(l&&"collapse"," d-md-block ")},r.a.createElement(k,null),r.a.createElement(R,{chats:O,setChat:function(e){C(function(e){return function(t){b.a.get("/api/chat/".concat(e._id),h()).then((function(e){t({type:"SET_ACTIVE_CHAT",payload:e.data})}))}}(e)),o(!0)}}))),r.a.createElement("div",{className:"col-md-7 col-lg-8 p-0 whitesmoke ".concat(!l&&"collapse")},y._id?r.a.createElement(n.Fragment,null,r.a.createElement(D,{chat:y,showModal:j}),r.a.createElement(L,{messages:y.messages}),r.a.createElement(U,{sendMessage:function(e){var a=_._id,n=_.name;t.emit("message",{from:a,name:n,text:e,room:y._id},(function(e){e.err;var t=e.message;C(S(t))}))}})):r.a.createElement(F,null)))}function F(){return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",null,r.a.createElement("a",{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"},"M"),r.a.createElement("a",{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"},"E"),r.a.createElement("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"},"R"),r.a.createElement("a",{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"},"N")," ","CHAT APP"),r.a.createElement("p",null,"+",r.a.createElement("a",{href:"https://socket.io/",target:"_blank",rel:"noopener noreferrer"},"socket.io"))))}function J(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),m=o[0],u=o[1],f=Object(E.c)((function(e){return e.error})),d=Object(E.c)((function(e){return e.auth})).isAuthenticated,g=Object(E.b)();Object(n.useEffect)((function(){g({type:"CLEAR_ERRORS"})}),[g]);var O=function(e){e.preventDefault(),g(function(e){var t=e.username,a=e.password;return function(e){e({type:"USER_LOADING"});var n=JSON.stringify({username:t,password:a});b.a.post("/api/users/auth",n,h()).then((function(t){localStorage.setItem("token",t.data.token),e({type:"AUTH_SUCCESS",payload:v(localStorage.getItem("token"))}),e(j()),e({type:"CLEAR_ERRORS"})})).catch((function(t){e(N(t,"LOGIN_FAIL")),e({type:"AUTH_ERROR"})}))}}({username:a,password:m}))};return d?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"row auth-container p-5"},r.a.createElement("div",{className:"col-lg-4 offset-lg-4 col-md-6 offset-md-3"},r.a.createElement("h2",null,"Login"),JSON.stringify(f),r.a.createElement("form",{onSubmit:function(e){return O(e)}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-md-3 col-form-label",htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control col-md-9",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-md-3 col-form-label",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control col-md-9",value:m,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("button",{className:"btn btn-outline-success btn-block offset-md-3 col-md-3"},"Login"),r.a.createElement("div",{className:"col-md-3 offset-3 col-form-label text-right"},r.a.createElement(p.b,{to:"/register"},"Register"))))))}function V(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(s.a)(l,2),m=o[0],u=o[1],f=Object(n.useState)(""),d=Object(s.a)(f,2),g=d[0],O=d[1],S=Object(n.useState)(""),R=Object(s.a)(S,2),C=R[0],j=R[1],A=Object(n.useState)(""),w=Object(s.a)(A,2),T=w[0],k=w[1],D=Object(E.c)((function(e){return e.error})),L=Object(E.c)((function(e){return e.auth})).isAuthenticated,U=Object(E.b)();Object(n.useEffect)((function(){U(y)}),[U]);var I=function(e){if(e.preventDefault(),C!==T)return U(_({msg:"Validation Error",errors:["Konfirmasi password tidak sama"]},"REGISTER_FAIL"));U(function(e){var t=e.username,a=e.name,n=e.email,r=e.password;return function(e){e({type:"USER_LOADING"});var c=JSON.stringify({username:t,name:a,email:n,password:r});b.a.post("/api/users",c,h()).then((function(t){e({type:"AUTH_SUCCESS",payload:v(t.data.token)}),e({type:"CLEAR_ERRORS"})})).catch((function(t){e(N(t,"REGISTER_FAIL")),e({type:"AUTH_ERROR"})}))}}({username:a,password:C,email:m,name:g}))};return L?r.a.createElement(i.a,{to:"/"}):r.a.createElement("div",{className:"row auth-container p-5"},r.a.createElement("div",{className:"col-md-8 offset-md-2 col-lg-6 offset-lg-3"},r.a.createElement("h2",null,"Register"),JSON.stringify(D),r.a.createElement("form",{onSubmit:function(e){return I(e)}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label col-md-3",htmlFor:"username"},"Username"),r.a.createElement("input",{placeholder:"Username",type:"text",className:"form-control col-md-9",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label col-md-3",htmlFor:"email"},"Email"),r.a.createElement("input",{placeholder:"Email",type:"email",className:"form-control col-md-9",value:m,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label col-md-3",htmlFor:"name"},"Nama"),r.a.createElement("input",{placeholder:"Nama",type:"text",className:"form-control col-md-9",value:g,onChange:function(e){return O(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label col-md-3",htmlFor:"password"},"Password"),r.a.createElement("input",{placeholder:"Password",type:"password",className:"form-control col-md-9",value:C,onChange:function(e){return j(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-form-label col-md-3",htmlFor:"password2"},"Konfirmasi Password"),r.a.createElement("input",{placeholder:"Konfirmasi password",type:"password",className:"form-control col-md-9",value:T,onChange:function(e){return k(e.target.value)}})),r.a.createElement("div",{className:"form-group row"},r.a.createElement("button",{className:"btn btn-outline-success btn-block offset-md-3 col-md-3"},"Register"),r.a.createElement("div",{className:"col-md-3 offset-3 col-form-label text-right"},r.a.createElement(p.b,{to:"/login"},"Login"))))))}var B=function(){var e=Object(E.b)(),t=Object(E.c)((function(e){return e.auth})),a=t.isAuthenticated,c=t.token,l=Object(n.useState)(null),m=Object(s.a)(l,2),f=m[0],d=m[1];return Object(n.useEffect)((function(){e((function(e){e({type:"USER_LOADING"});var t=v();if(t)return e({type:"USER_LOADED",payload:t}),e(j());e(_({msg:"No token"})),e({type:"AUTH_ERROR"})}))}),[e]),Object(n.useEffect)((function(){c&&(f?f&&f.close():d(u.a.connect("/?token=".concat(c))))}),[c,f]),r.a.createElement("div",{className:"container-fluid",id:"app"},r.a.createElement(p.a,null,r.a.createElement(i.d,null,r.a.createElement((function(e){var t=e.path,n=(e.lastPath,e.children),c=Object(o.a)(e,["path","lastPath","children"]);return a?r.a.createElement(i.b,Object.assign({path:t},c),n):r.a.createElement(i.a,{to:"/login"})}),{exact:!0,path:"/"},r.a.createElement(P,{io:f})),r.a.createElement(i.b,{exact:!0,path:"/login"},r.a.createElement(J,null)),r.a.createElement(i.b,{exact:!0,path:"/register"},r.a.createElement(V,null)),r.a.createElement(i.b,{path:"*"},r.a.createElement("h1",null,"Not found")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(10),z=a(60),K={token:null,isAuthenticated:!1,isLoading:!1,user:null},W=a(14),Y=[],$={msg:"",errors:[],status:null,id:null},q={data:[],isLoading:!1},Q={_id:null,name:"",type:"",members:[],messages:[],isLoading:!1},Z=Object(X.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(f.a)({},e,{isLoading:!0});case"AUTH_SUCCESS":case"USER_LOADED":return Object(f.a)({},t.payload,{isLoading:!1,isAuthenticated:!0});case"AUTH_ERROR":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),K;default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONTACTS_LOADED":return t.payload;case"CONTACTS_UPDATED":return[].concat(Object(W.a)(e),[t.payload]);case"LOGOUT_SUCCESS":return Y;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,errors:t.payload.errors,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return $;default:return e}},chats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHATS_LOADING":return Object(f.a)({},e,{isLoading:!0});case"CHATS_LOADED":return{data:t.payload,isLoading:!1};case"UPDATE_MESSAGES":var a=null,n=e.data.map((function(e,n){return e._id===t.payload.room&&(a=n,e.message=t.payload,e.messages=[].concat(Object(W.a)(e.messages),[t.payload])),e}));return n.splice(0,0,n.splice(a,1)[0]),{isLoading:!1,data:n};case"GROUP_CREATED":case"ADDED_TO_GROUP":var r=t.payload,c=r._id,l=r.name,o=r.type,s=r.messages;return e.data.unshift({_id:c,name:l,type:o,messages:s,message:s[0]}),Object(f.a)({},e,{isLoading:!1});case"CLEAR_CHATS":case"CHATS_ERROR":case"LOGOUT_SUCCESS":return q;default:return e}},activeChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_CHAT":return Object(f.a)({},t.payload);case"UPDATE_MESSAGES":return Object(f.a)({},e,{messages:[].concat(Object(W.a)(e.messages),[t.payload])});case"NEW_MEMBER":return Object(f.a)({},e,{members:[].concat(Object(W.a)(e.members),[t.payload])});case"LOGOUT_SUCCESS":return Q;default:return e}}}),ee=[z.a],te=Object(X.e)(Z,{},window.__REDUX_DEVTOOLS_EXTENSION__?Object(X.d)(X.a.apply(void 0,ee),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()):Object(X.d)(X.a.apply(void 0,ee)));l.a.render(r.a.createElement(E.a,{store:te},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(123)},66:function(e,t,a){},94:function(e,t){},97:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.cd851f3e.chunk.js.map